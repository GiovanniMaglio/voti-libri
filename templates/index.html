{% extends 'base.html' %}
{% block title %}Elenco libri{% endblock %}

{% block content %}
<h2>Libri letti</h2>
<ul class="list-group mb-4">
  {% for book in books %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <a href="{{ url_for('book_detail', book_id=book[0]) }}">
        {{ book[1] }} — <em>{{ book[2] }}</em>
      </a>
      <span>
        {% for i in range(1, 6) %}
          {% if book[3] >= i %}
            ★
          {% elif book[3] >= i - 0.5 %}
            ☆
          {% endif %}
        {% endfor %}
      </span>
    </li>
  {% endfor %}
</ul>

<h2>Aggiungi un libro</h2>
<form action="/add" method="POST" class="mb-4">
  <div class="mb-2">
    <input type="text" name="title" placeholder="Titolo" class="form-control" required>
  </div>
  <div class="mb-2">
    <input type="text" name="author" placeholder="Autore" class="form-control" required>
  </div>
  <div class="mb-2">
    <input type="number" name="rating" step="0.5" min="0" max="5" placeholder="Voto (es. 4.5)" class="form-control" required>
  </div>
  <div class="mb-2">
    <textarea name="review" placeholder="Recensione (facoltativa)" class="form-control"></textarea>
  </div>
  <button type="submit" class="btn btn-primary">Aggiungi libro</button>
</form>

<h2>Iscriviti alla newsletter</h2>
<form action="/subscribe" method="POST">
  <div class="mb-2">
    <input type="email" name="email" placeholder="La tua email" class="form-control" required>
  </div>
  <button type="submit" class="btn btn-secondary">Iscriviti</button>
</form>
{% endblock %}